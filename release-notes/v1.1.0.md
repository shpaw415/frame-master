# Frame-Master v1.1.0 - Build Lifecycle & Enhanced Plugin API

**Release Date:** October 28, 2025  
**Status:** Latest

---

## üéâ What's New

Frame-Master v1.1.0 brings powerful new capabilities for plugin developers with a comprehensive build system, enhanced CLI tools, and improved type definitions. This release focuses on giving plugin authors more control over the build process and providing better developer experience.

---

## ‚ú® Major Features

### üî® Build Lifecycle Hooks

Plugin developers now have complete control over the build process through a new build lifecycle system.

#### New `build` Plugin Property

```typescript
import type { FrameMasterPlugin } from "frame-master/plugin/types";

export function myPlugin(): FrameMasterPlugin {
  return {
    name: "my-plugin",
    version: "1.0.0",

    build: {
      // Customize Bun build configuration
      buildConfig: (builder) => ({
        external: ["react", "react-dom"],
        minify: true,
        sourcemap: "external",
        target: "browser",
      }),

      // Hook before build starts
      beforeBuild: async (buildConfig, builder) => {
        console.log("Preparing build...");
        // Clean directories, generate files, etc.
        await Bun.write(
          "dist/manifest.json",
          JSON.stringify({
            timestamp: Date.now(),
          })
        );
      },

      // Hook after build completes
      afterBuild: async (buildConfig, result, builder) => {
        console.log(`Build completed: ${result.outputs.length} files`);
        // Post-process outputs, copy assets, etc.
        for (const output of result.outputs) {
          console.log(`Generated: ${output.path}`);
        }
      },

      // Enable detailed build logging
      enableLoging: true,
    },
  };
}
```

**Key Features:**

- **`buildConfig`** - Return partial `Bun.BuildConfig` to customize the build
- **`beforeBuild`** - Execute tasks before the build process starts
- **`afterBuild`** - Process build results and perform post-build operations
- **`enableLoging`** - Toggle detailed build logging for debugging

### üèóÔ∏è Builder Utility Class

New `Builder` class provides a unified way to manage and execute builds across all plugins.

```typescript
import { Builder } from "frame-master/build";

// Create a builder with plugin configurations
const builder = Builder.createBuilder({
  pluginBuildConfig: [
    (builder) => ({
      target: "browser",
      external: ["react"],
    }),
  ],
  beforeBuilds: [
    async (config, builder) => {
      console.log("Starting build...");
    },
  ],
  afterBuilds: [
    async (config, result, builder) => {
      console.log("Build complete!");
    },
  ],
  enableLogging: true,
});

// Execute the build with entrypoints
const result = await builder.build(
  "/path/to/src/index.tsx",
  "/path/to/src/client.ts"
);

if (result.success) {
  console.log("Build successful!", result.outputs);
}
```

**Builder Features:**

- Merges build configurations from multiple plugins
- Executes before/after hooks in order
- Provides access to build artifacts and outputs
- Configurable logging for debugging
- Public API for plugin authors to trigger builds

---

## üõ†Ô∏è CLI Enhancements

### New `plugin` Command Suite

Comprehensive plugin management directly from the CLI:

```bash
# List all installed plugins
frame-master plugin list

# Show detailed plugin information
frame-master plugin list --verbose

# Get information about a specific plugin
frame-master plugin info frame-master-plugin-react-ssr

# Validate plugin configuration and dependencies
frame-master plugin validate

# Create a new plugin from template
frame-master plugin create my-custom-plugin
```

### Updated `create` Command

```bash
# Create a new project with type options
frame-master create my-app

# Specify project type (more types coming soon)
frame-master create my-app --type minimal
```

**Available Commands:**

- ‚úÖ `frame-master dev` - Start development server
- ‚úÖ `frame-master start` - Start production server
- ‚úÖ `frame-master init` - Initialize Frame-Master in existing project
- ‚úÖ `frame-master create <name>` - Create new project with templates
- ‚úÖ `frame-master plugin list` - List installed plugins
- ‚úÖ `frame-master plugin info <name>` - Show plugin details
- ‚úÖ `frame-master plugin validate` - Validate plugin configuration
- ‚úÖ `frame-master plugin create <name>` - Generate plugin boilerplate

---

## üìö Enhanced Documentation

### Comprehensive JSDoc for Build API

All build-related types now include detailed JSDoc documentation with examples:

````typescript
/**
 * Build lifecycle hooks for customizing the build process.
 *
 * Allows plugins to modify build configuration, perform pre/post-build operations,
 * and integrate custom build logic into Frame-Master's build pipeline.
 *
 * @example
 * ```typescript
 * {
 *   build: {
 *     buildConfig: (builder) => ({
 *       external: ["some-external-package"],
 *       minify: true,
 *       sourcemap: "external"
 *     }),
 *     beforeBuild: async (buildConfig, builder) => {
 *       console.log("Starting build process...");
 *     },
 *     afterBuild: async (buildConfig, result, builder) => {
 *       console.log("Build completed!");
 *     },
 *     enableLoging: true
 *   }
 * }
 * ```
 */
build: BuildOptionsPlugin;
````

### Updated Plugin Type Definitions

Enhanced `FrameMasterPlugin` type with:

- Clear distinction between required and optional fields
- Comprehensive examples for each hook
- Better type inference for plugin options
- Detailed parameter descriptions

---

## üßπ Code Quality Improvements

### Type System Cleanup

- Removed unused type definitions
- Improved type inference for plugin hooks
- Better generic type constraints
- Cleaner separation of concerns

### Build System Refactoring

- Consolidated build logic into `Builder` class
- Improved configuration merging
- Better error handling during builds
- More predictable build behavior

---

## üîÑ Breaking Changes

### None!

v1.1.0 is fully backward compatible with v1.0.0. All existing plugins will continue to work without modifications.

The new `build` property is **optional** and only needed if you want to customize the build process.

---

## üì¶ What's Included

### Updated Plugin API

```typescript
export type FrameMasterPlugin = Required<{
  name: string;
  version: string;
}> &
  Partial<{
    router: {
      /* ... */
    };
    serverStart: {
      /* ... */
    };
    websocket: {
      /* ... */
    };
    serverConfig: {
      /* ... */
    };
    onFileSystemChange: FileChangeCallback;
    fileSystemWatchDir: Array<string>;
    priority: number;
    requirement: Requirement;
    directives: Array<{ name: string; regex: RegExp }>;
    runtimePlugins: Array<Bun.BunPlugin>;

    // NEW in v1.1.0
    build: BuildOptionsPlugin;
  }>;
```

### Build Options Type

```typescript
export type BuildOptionsPlugin = {
  buildConfig?: (builder: Builder) => Partial<Bun.BuildConfig>;
  beforeBuild?: (
    buildConfig: Bun.BuildConfig,
    builder: Builder
  ) => void | Promise<void>;
  afterBuild?: (
    buildConfig: Bun.BuildConfig,
    result: Bun.BuildOutput,
    builder: Builder
  ) => void | Promise<void>;
  enableLoging?: boolean;
};
```

---

## üí° Use Cases

### Custom Build Optimization

```typescript
// Optimize build for specific frontend framework
build: {
  buildConfig: (builder) => ({
    target: "browser",
    minify: process.env.NODE_ENV === "production",
    splitting: true,
    external: ["react", "react-dom"],
  }),
}
```

### Asset Generation

```typescript
// Generate build manifest and copy assets
build: {
  beforeBuild: async (config, builder) => {
    await Bun.$`rm -rf dist/*`;
  },
  afterBuild: async (config, result, builder) => {
    // Generate manifest
    await Bun.write("dist/manifest.json", JSON.stringify({
      files: result.outputs.map(o => o.path),
      timestamp: Date.now(),
    }));

    // Copy static assets
    await Bun.$`cp -r static/* dist/`;
  },
}
```

### Build-Time Code Generation

```typescript
// Generate type definitions or documentation
build: {
  beforeBuild: async (config, builder) => {
    // Generate routes type definitions
    const routes = await scanRoutes("./src/pages");
    await writeRouteTypes("./src/routes.d.ts", routes);
  },
}
```

---

## üéØ Migration from v1.0.0

No migration needed! v1.1.0 is fully backward compatible.

To take advantage of new build features:

1. **Add build hooks to your plugin** (optional):

```typescript
export function myPlugin(): FrameMasterPlugin {
  return {
    name: "my-plugin",
    version: "1.1.0",

    // Add new build configuration
    build: {
      buildConfig: (builder) => ({
        // your config
      }),
    },

    // Keep all existing properties
    router: {
      /* ... */
    },
    // ...
  };
}
```

2. **Use new CLI commands**:

```bash
# Try new plugin management commands
frame-master plugin list --verbose
frame-master plugin validate
```

3. **Update documentation** to use new JSDoc examples

---

## üöÄ Getting Started with v1.1.0

### Installation

```bash
# Update to latest version
bun add -g frame-master@latest

# Or install fresh
bun add -g frame-master
```

### Example: Build-Aware Plugin

```typescript
// my-build-plugin.ts
import type { FrameMasterPlugin } from "frame-master/plugin/types";
import { Builder } from "frame-master/build";

export function myBuildPlugin(): FrameMasterPlugin {
  return {
    name: "my-build-plugin",
    version: "1.0.0",

    build: {
      buildConfig: (builder) => ({
        external: ["some-package"],
        target: "browser",
        minify: true,
      }),

      beforeBuild: async (config, builder) => {
        console.log("üî® Starting custom build process...");
        // Prepare environment
      },

      afterBuild: async (config, result, builder) => {
        if (result.success) {
          console.log("‚úÖ Build completed successfully!");
          console.log(`üì¶ Generated ${result.outputs.length} files`);
        } else {
          console.error("‚ùå Build failed");
        }
      },

      enableLoging: true,
    },

    serverStart: {
      main: async () => {
        console.log("Plugin initialized!");
      },
    },
  };
}
```

---

## üîÆ What's Next

We're continuously improving Frame-Master. Future releases will include:

- **More CLI commands** - Testing, deployment, and debugging tools
- **Build presets** - Common build configurations for popular frameworks
- **Plugin marketplace** - Discover and share plugins easily
- **Enhanced dev tools** - Better debugging and profiling capabilities
- **Performance optimizations** - Even faster builds and hot reload

---

## üìñ Documentation

Full documentation available at:

- [Plugin API Reference](https://frame-master.dev/docs/api/plugin-types)
- [Build System Guide](https://frame-master.dev/docs/plugins/creating)
- [CLI Commands](https://frame-master.dev/docs/cli)

---

## ü§ù Contributing

We welcome contributions! Check out:

- [GitHub Issues](https://github.com/shpaw415/frame-master/issues) - Report bugs or request features
- [Discussions](https://github.com/shpaw415/frame-master/discussions) - Share ideas and get help
- [Pull Requests](https://github.com/shpaw415/frame-master/pulls) - Contribute code

---

## üôè Acknowledgments

Thank you to everyone who:

- Tested the beta versions
- Provided feedback and suggestions
- Reported issues and bugs
- Contributed to the codebase

---

## üìÑ Full Changelog

### Added

- ‚ú® Build lifecycle hooks (`buildConfig`, `beforeBuild`, `afterBuild`)
- ‚ú® `Builder` utility class for managing plugin builds
- ‚ú® `frame-master plugin` command suite
- ‚ú® Comprehensive JSDoc documentation for build API
- ‚ú® `enableLoging` option for build debugging

### Enhanced

- üìù Improved plugin type definitions
- üìù Better TypeScript type inference
- üõ†Ô∏è Enhanced CLI with plugin management
- üìö Updated documentation with build examples

### Fixed

- üêõ Type system cleanup and unused type removal
- üîß Improved build configuration merging logic
- üîß Better error handling in build process

### Internal

- üßπ Code refactoring for better maintainability
- üßπ Consolidated build logic
- üßπ Improved separation of concerns

---

**Frame-Master v1.1.0** empowers plugin developers with unprecedented control over the build process while maintaining the simplicity and flexibility that makes Frame-Master unique.

**Build your perfect framework. Now with full build customization.**

---

For more information:

- üìñ [Documentation](https://frame-master.dev/docs)
- üêô [GitHub](https://github.com/shpaw415/frame-master)
- üí¨ [Discussions](https://github.com/shpaw415/frame-master/discussions)
- üê¶ Follow updates on social media
